{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": { "200": { "description": "" } },
        "tags": ["App"]
      }
    },
    "/users": {
      "get": {
        "operationId": "UsersController_getAll",
        "parameters": [],
        "responses": { "200": { "description": "" } },
        "summary": "Get all users with pagination and search",
        "tags": ["Users"]
      },
      "post": {
        "operationId": "UsersController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UserCreateModel" }
            }
          }
        },
        "responses": { "201": { "description": "" } },
        "summary": "Create a new user",
        "tags": ["Users"]
      }
    },
    "/users/{id}": {
      "get": {
        "operationId": "UsersController_getById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": { "200": { "description": "" } },
        "summary": "Get user by ID",
        "tags": ["Users"]
      },
      "delete": {
        "operationId": "UsersController_delete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": { "204": { "description": "" } },
        "summary": "Delete user by ID",
        "tags": ["Users"]
      }
    },
    "/auth/signup": {
      "post": {
        "operationId": "AuthController_signup",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SignupInputModel" }
            }
          }
        },
        "responses": { "201": { "description": "" } },
        "summary": "Register a new user account",
        "tags": ["Auth"]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginInputModel" }
            }
          }
        },
        "responses": { "200": { "description": "" } },
        "summary": "Login via email",
        "tags": ["Auth"]
      }
    },
    "/auth/google": {
      "post": {
        "operationId": "AuthController_googleAuth",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/GoogleAuthInputModel" }
            }
          }
        },
        "responses": { "200": { "description": "" } },
        "summary": "Authenticate with Google OAuth",
        "tags": ["Auth"]
      }
    },
    "/auth/me": {
      "get": {
        "operationId": "AuthController_getCurrentUser",
        "parameters": [],
        "responses": { "200": { "description": "" } },
        "security": [{ "bearer": [] }],
        "summary": "Get current authenticated user",
        "tags": ["Auth"]
      }
    },
    "/food-database/search": {
      "get": {
        "description": "Search across USDA FoodData Central and Open Food Facts databases. Results are cached for faster subsequent searches.",
        "operationId": "FoodDatabaseController_searchFoods",
        "parameters": [
          {
            "name": "query",
            "required": true,
            "in": "query",
            "description": "Search query for food name or brand",
            "schema": {
              "minLength": 2,
              "maxLength": 100,
              "example": "apple juice",
              "type": "string"
            }
          },
          {
            "name": "source",
            "required": false,
            "in": "query",
            "description": "Data source to search in",
            "schema": {
              "default": "all",
              "example": "all",
              "type": "string",
              "enum": ["all", "usda", "openfoodfacts"]
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of results to return",
            "schema": { "default": 20, "example": 20, "type": "number" }
          },
          {
            "name": "language",
            "required": false,
            "in": "query",
            "description": "Language preference (ISO 639-1 code)",
            "schema": { "default": "en", "example": "ru", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of foods matching the search query",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FoodSearchResponseDto"
                }
              }
            }
          }
        },
        "summary": "Search for foods by name or description",
        "tags": ["Food Database"]
      }
    },
    "/food-database/barcode/{barcode}": {
      "get": {
        "description": "Search for a product by its barcode (EAN-13, UPC-A, etc.). Primarily uses Open Food Facts database.",
        "operationId": "FoodDatabaseController_searchByBarcode",
        "parameters": [
          {
            "name": "barcode",
            "required": true,
            "in": "path",
            "description": "Product barcode (EAN-13, UPC-A, etc.)",
            "schema": {
              "pattern": "^[0-9]{8,13}$",
              "example": "3017620422003",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Food found by barcode",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/FoodResponseDto" }
              }
            }
          },
          "404": { "description": "Food not found" }
        },
        "summary": "Search for food by barcode",
        "tags": ["Food Database"]
      }
    },
    "/food-database/{id}": {
      "get": {
        "description": "Retrieve detailed information about a specific food item by its database ID.",
        "operationId": "FoodDatabaseController_getFoodById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Food details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/FoodResponseDto" }
              }
            }
          },
          "404": { "description": "Food not found" }
        },
        "summary": "Get food by ID",
        "tags": ["Food Database"]
      }
    },
    "/food-database/stats/cache": {
      "get": {
        "description": "Retrieve statistics about cached food data.",
        "operationId": "FoodDatabaseController_getCacheStats",
        "parameters": [],
        "responses": { "200": { "description": "Cache statistics" } },
        "summary": "Get cache statistics",
        "tags": ["Food Database"]
      }
    },
    "/products": {
      "get": {
        "operationId": "ProductsController_getAll",
        "parameters": [
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search by product name (searches in normalized name)",
            "schema": { "example": "овся", "type": "string" }
          },
          {
            "name": "category",
            "required": false,
            "in": "query",
            "description": "Filter by category",
            "schema": { "example": "Cereals", "type": "string" }
          },
          {
            "name": "source",
            "required": false,
            "in": "query",
            "description": "Filter by data source",
            "schema": {
              "type": "string",
              "enum": ["manual", "ai", "openfoodfacts", "user"]
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of results to return",
            "schema": { "minimum": 1, "default": 20, "type": "number" }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of results to skip for pagination",
            "schema": { "minimum": 0, "default": 0, "type": "number" }
          }
        ],
        "responses": {
          "200": {
            "description": "Products list with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ProductOutputModel"
                      }
                    },
                    "total": { "type": "number", "example": 100 }
                  }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get list of products with filters",
        "tags": ["Products"]
      },
      "post": {
        "operationId": "ProductsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProductInputModel"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductOutputModel" }
              }
            }
          },
          "400": { "description": "Bad request - validation failed" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create new product",
        "tags": ["Products"]
      }
    },
    "/products/search": {
      "get": {
        "operationId": "ProductsController_search",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ProductOutputModel"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Autocomplete search for products",
        "tags": ["Products"]
      }
    },
    "/products/barcode/{barcode}": {
      "get": {
        "operationId": "ProductsController_getByBarcode",
        "parameters": [
          {
            "name": "barcode",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductOutputModel" }
              }
            }
          },
          "404": { "description": "Product not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get product by barcode",
        "tags": ["Products"]
      }
    },
    "/products/{id}": {
      "get": {
        "operationId": "ProductsController_getById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductOutputModel" }
              }
            }
          },
          "404": { "description": "Product not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get product by ID",
        "tags": ["Products"]
      },
      "put": {
        "operationId": "ProductsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProductInputModel"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductOutputModel" }
              }
            }
          },
          "400": { "description": "Bad request - validation failed" },
          "403": { "description": "Forbidden - not the creator" },
          "404": { "description": "Product not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update product",
        "tags": ["Products"]
      },
      "delete": {
        "operationId": "ProductsController_delete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "204": { "description": "Product deleted" },
          "403": { "description": "Forbidden - not the creator" },
          "404": { "description": "Product not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Delete product",
        "tags": ["Products"]
      }
    },
    "/day/{date}": {
      "get": {
        "operationId": "DaysController_getDayEntry",
        "parameters": [
          {
            "name": "date",
            "required": true,
            "in": "path",
            "description": "Date in YYYY-MM-DD format",
            "schema": {
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
              "example": "2025-10-20",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Day entry found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/DayEntryOutputModel" }
              }
            }
          },
          "404": { "description": "Day entry not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get day entry with meals for a specific date",
        "tags": ["Days"]
      }
    },
    "/day/{date}/meals": {
      "post": {
        "operationId": "DaysController_createMeal",
        "parameters": [
          {
            "name": "date",
            "required": true,
            "in": "path",
            "description": "Date in YYYY-MM-DD format",
            "schema": {
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
              "example": "2025-10-20",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateMealInputModel" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Meal created successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MealOutputModel" }
              }
            }
          },
          "400": { "description": "Invalid input data" },
          "401": { "description": "Unauthorized" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create a new meal for a specific date",
        "tags": ["Days"]
      }
    },
    "/meals/{id}": {
      "get": {
        "operationId": "MealsController_getMealById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Meal ID",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Meal found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MealOutputModel" }
              }
            }
          },
          "403": { "description": "Forbidden - not your meal" },
          "404": { "description": "Meal not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get meal by ID",
        "tags": ["Meals"]
      },
      "put": {
        "operationId": "MealsController_updateMeal",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Meal ID",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateMealInputModel" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Meal updated successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MealOutputModel" }
              }
            }
          },
          "400": { "description": "Invalid input data" },
          "403": { "description": "Forbidden - not your meal" },
          "404": { "description": "Meal not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update meal by ID",
        "tags": ["Meals"]
      },
      "delete": {
        "operationId": "MealsController_deleteMeal",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Meal ID",
            "schema": {
              "example": "507f1f77bcf86cd799439011",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": { "description": "Meal deleted successfully" },
          "403": { "description": "Forbidden - not your meal" },
          "404": { "description": "Meal not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Delete meal by ID",
        "tags": ["Meals"]
      }
    }
  },
  "info": {
    "title": "Nutri-AI API",
    "description": "The Nutri-AI API description",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": { "scheme": "bearer", "bearerFormat": "JWT", "type": "http" },
      "basicAuth": { "type": "http", "scheme": "basic" }
    },
    "schemas": {
      "UserCreateModel": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email address",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "SecurePass123!",
            "minLength": 6
          },
          "displayName": {
            "type": "string",
            "description": "Display name for the user",
            "example": "John Doe"
          },
          "timezone": {
            "type": "string",
            "description": "User timezone",
            "example": "Europe/Moscow"
          },
          "dailyKcalGoal": {
            "type": "number",
            "description": "Daily calorie goal in kcal",
            "example": 2000,
            "minimum": 0
          }
        },
        "required": ["email", "password"]
      },
      "SignupInputModel": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email address",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "SecurePass123!",
            "minLength": 6
          },
          "displayName": {
            "type": "string",
            "description": "Display name for the user",
            "example": "John Doe"
          },
          "timezone": {
            "type": "string",
            "description": "User timezone",
            "example": "Europe/Moscow"
          }
        },
        "required": ["email", "password"]
      },
      "LoginInputModel": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email address",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "SecurePass123!"
          }
        },
        "required": ["email", "password"]
      },
      "GoogleAuthInputModel": {
        "type": "object",
        "properties": {
          "idToken": {
            "type": "string",
            "description": "Google ID token from Gmail OAuth",
            "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE4MmU..."
          },
          "timezone": {
            "type": "string",
            "description": "User timezone",
            "example": "Europe/Moscow"
          }
        },
        "required": ["idToken"]
      },
      "NutritionInfoDto": {
        "type": "object",
        "properties": {
          "calories": {
            "type": "number",
            "description": "Calories in kcal per 100g",
            "example": 52
          },
          "proteins": {
            "type": "number",
            "description": "Proteins in grams per 100g",
            "example": 0.3
          },
          "carbohydrates": {
            "type": "number",
            "description": "Carbohydrates in grams per 100g",
            "example": 13.8
          },
          "fats": {
            "type": "number",
            "description": "Fats in grams per 100g",
            "example": 0.2
          },
          "fiber": {
            "type": "number",
            "description": "Fiber in grams per 100g",
            "example": 2.4
          },
          "sugar": {
            "type": "number",
            "description": "Sugar in grams per 100g",
            "example": 10.4
          },
          "saturatedFats": {
            "type": "number",
            "description": "Saturated fats in grams per 100g",
            "example": 0.1
          },
          "sodium": {
            "type": "number",
            "description": "Sodium in mg per 100g",
            "example": 1
          },
          "cholesterol": {
            "type": "number",
            "description": "Cholesterol in mg per 100g",
            "example": 0
          },
          "calcium": {
            "type": "number",
            "description": "Calcium in mg per 100g",
            "example": 6
          },
          "iron": {
            "type": "number",
            "description": "Iron in mg per 100g",
            "example": 0.12
          },
          "vitaminC": {
            "type": "number",
            "description": "Vitamin C in mg per 100g",
            "example": 4.6
          },
          "vitaminA": {
            "type": "number",
            "description": "Vitamin A in µg per 100g",
            "example": 3
          },
          "potassium": {
            "type": "number",
            "description": "Potassium in mg per 100g",
            "example": 107
          }
        },
        "required": ["calories", "proteins", "carbohydrates", "fats"]
      },
      "FoodResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Food ID in database",
            "example": "507f1f77bcf86cd799439011"
          },
          "externalId": {
            "type": "string",
            "description": "External ID from source API",
            "example": "123456"
          },
          "source": {
            "type": "string",
            "description": "Data source",
            "example": "usda",
            "enum": ["usda", "openfoodfacts"]
          },
          "name": {
            "type": "string",
            "description": "Food name",
            "example": "Apple juice, unsweetened"
          },
          "brand": {
            "type": "string",
            "description": "Brand name",
            "example": "Tropicana"
          },
          "barcode": {
            "type": "string",
            "description": "Product barcode",
            "example": "3017620422003"
          },
          "description": {
            "type": "string",
            "description": "Detailed description",
            "example": "100% pure apple juice"
          },
          "imageUrl": {
            "type": "string",
            "description": "Product image URL",
            "example": "https://images.openfoodfacts.org/images/products/301/762/042/2003/front_en.jpg"
          },
          "nutrition": {
            "description": "Nutrition information per 100g",
            "allOf": [{ "$ref": "#/components/schemas/NutritionInfoDto" }]
          },
          "servingSize": {
            "type": "string",
            "description": "Serving size",
            "example": "240 ml"
          },
          "servingSizeGrams": {
            "type": "number",
            "description": "Serving size in grams",
            "example": 240
          },
          "category": {
            "type": "string",
            "description": "Food category",
            "example": "Beverages"
          },
          "tags": {
            "description": "Product tags",
            "example": ["vegan", "gluten-free"],
            "type": "array",
            "items": { "type": "string" }
          },
          "language": {
            "type": "string",
            "description": "Content language",
            "example": "en"
          }
        },
        "required": ["id", "externalId", "source", "name", "nutrition"]
      },
      "FoodSearchResponseDto": {
        "type": "object",
        "properties": {
          "foods": {
            "description": "List of foods",
            "type": "array",
            "items": { "$ref": "#/components/schemas/FoodResponseDto" }
          },
          "total": {
            "type": "number",
            "description": "Total number of results found",
            "example": 150
          },
          "count": {
            "type": "number",
            "description": "Number of results returned",
            "example": 20
          }
        },
        "required": ["foods", "total", "count"]
      },
      "CreateProductInputModel": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Product name",
            "example": "Овсянка"
          },
          "kcalPer100g": {
            "type": "number",
            "description": "Calories per 100g",
            "example": 343,
            "minimum": 0
          },
          "proteinPer100g": {
            "type": "number",
            "description": "Protein per 100g",
            "example": 12.6,
            "minimum": 0
          },
          "fatPer100g": {
            "type": "number",
            "description": "Fat per 100g",
            "example": 3.3,
            "minimum": 0
          },
          "carbsPer100g": {
            "type": "number",
            "description": "Carbohydrates per 100g",
            "example": 62.1,
            "minimum": 0
          },
          "fiberPer100g": {
            "type": "number",
            "description": "Fiber per 100g",
            "example": 8,
            "minimum": 0
          },
          "sugarPer100g": {
            "type": "number",
            "description": "Sugar per 100g",
            "example": 1,
            "minimum": 0
          },
          "barcode": {
            "type": "string",
            "description": "Product barcode (EAN/UPC)",
            "example": "4607065597009"
          },
          "brand": {
            "type": "string",
            "description": "Brand name",
            "example": "Nordic"
          },
          "category": {
            "type": "string",
            "description": "Product category",
            "example": "Cereals"
          },
          "source": {
            "type": "string",
            "description": "Data source",
            "enum": ["manual", "ai", "openfoodfacts", "user"],
            "default": "manual"
          }
        },
        "required": ["name", "kcalPer100g"]
      },
      "ProductOutputModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Product unique identifier",
            "example": "507f1f77bcf86cd799439011"
          },
          "name": {
            "type": "string",
            "description": "Product name",
            "example": "Овсянка"
          },
          "normalizedName": {
            "type": "string",
            "description": "Normalized name for search",
            "example": "ovsyanka"
          },
          "kcalPer100g": {
            "type": "number",
            "description": "Calories per 100g",
            "example": 343
          },
          "proteinPer100g": {
            "type": "number",
            "description": "Protein per 100g",
            "example": 12.6
          },
          "fatPer100g": {
            "type": "number",
            "description": "Fat per 100g",
            "example": 3.3
          },
          "carbsPer100g": {
            "type": "number",
            "description": "Carbohydrates per 100g",
            "example": 62.1
          },
          "fiberPer100g": {
            "type": "number",
            "description": "Fiber per 100g",
            "example": 8
          },
          "sugarPer100g": {
            "type": "number",
            "description": "Sugar per 100g",
            "example": 1
          },
          "source": {
            "type": "string",
            "description": "Data source",
            "enum": ["manual", "ai", "openfoodfacts", "user"],
            "example": "user"
          },
          "isVerified": {
            "type": "boolean",
            "description": "Whether the product is verified",
            "example": false
          },
          "usageCount": {
            "type": "number",
            "description": "Number of times this product has been used",
            "example": 0
          },
          "createdBy": {
            "type": "string",
            "description": "ID of the user who created this product",
            "example": "507f1f77bcf86cd799439011"
          },
          "barcode": {
            "type": "string",
            "description": "Product barcode (EAN/UPC)",
            "example": "4607065597009"
          },
          "brand": {
            "type": "string",
            "description": "Brand name",
            "example": "Nordic"
          },
          "category": {
            "type": "string",
            "description": "Product category",
            "example": "Cereals"
          },
          "createdAt": {
            "type": "string",
            "description": "Creation timestamp",
            "example": "2025-12-25T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "description": "Last update timestamp",
            "example": "2025-12-25T10:30:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "normalizedName",
          "kcalPer100g",
          "source",
          "isVerified",
          "usageCount",
          "createdAt",
          "updatedAt"
        ]
      },
      "UpdateProductInputModel": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Product name",
            "example": "Овсянка"
          },
          "kcalPer100g": {
            "type": "number",
            "description": "Calories per 100g",
            "example": 343,
            "minimum": 0
          },
          "proteinPer100g": {
            "type": "number",
            "description": "Protein per 100g",
            "example": 12.6,
            "minimum": 0
          },
          "fatPer100g": {
            "type": "number",
            "description": "Fat per 100g",
            "example": 3.3,
            "minimum": 0
          },
          "carbsPer100g": {
            "type": "number",
            "description": "Carbohydrates per 100g",
            "example": 62.1,
            "minimum": 0
          },
          "fiberPer100g": {
            "type": "number",
            "description": "Fiber per 100g",
            "example": 8,
            "minimum": 0
          },
          "sugarPer100g": {
            "type": "number",
            "description": "Sugar per 100g",
            "example": 1,
            "minimum": 0
          },
          "barcode": {
            "type": "string",
            "description": "Product barcode (EAN/UPC)",
            "example": "4607065597009"
          },
          "brand": {
            "type": "string",
            "description": "Brand name",
            "example": "Nordic"
          },
          "category": {
            "type": "string",
            "description": "Product category",
            "example": "Cereals"
          }
        }
      },
      "FoodItemOutputModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Food item ID",
            "example": "507f1f77bcf86cd799439011"
          },
          "productId": {
            "type": "string",
            "description": "Product ID reference",
            "example": "507f1f77bcf86cd799439011"
          },
          "recipeId": {
            "type": "string",
            "description": "Recipe ID reference",
            "example": "507f1f77bcf86cd799439011"
          },
          "name": {
            "type": "string",
            "description": "Food item name",
            "example": "Овсянка"
          },
          "quantity": {
            "type": "number",
            "description": "Quantity (grams for products, servings for recipes)",
            "example": 50
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement",
            "example": "g"
          },
          "kcal": {
            "type": "number",
            "description": "Calories",
            "example": 172
          },
          "protein": {
            "type": "number",
            "description": "Protein in grams",
            "example": 6.3
          },
          "fat": {
            "type": "number",
            "description": "Fat in grams",
            "example": 1.65
          },
          "carbs": {
            "type": "number",
            "description": "Carbohydrates in grams",
            "example": 31.05
          },
          "source": {
            "type": "string",
            "description": "Source of the item (product, recipe, ai)",
            "example": "product"
          }
        },
        "required": ["id", "name", "quantity", "unit", "kcal"]
      },
      "MealOutputModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Meal ID",
            "example": "507f1f77bcf86cd799439011"
          },
          "dayEntryId": {
            "type": "string",
            "description": "Day entry ID",
            "example": "507f1f77bcf86cd799439011"
          },
          "type": {
            "type": "string",
            "description": "Meal type",
            "enum": ["breakfast", "lunch", "dinner", "snack", "other"],
            "example": "breakfast"
          },
          "time": {
            "type": "string",
            "description": "Time of meal in HH:mm format",
            "example": "14:30"
          },
          "name": {
            "type": "string",
            "description": "Meal name",
            "example": "Овсянка с бананом"
          },
          "items": {
            "description": "Food items in this meal",
            "type": "array",
            "items": { "$ref": "#/components/schemas/FoodItemOutputModel" }
          },
          "totalKcal": {
            "type": "number",
            "description": "Total calories",
            "example": 450
          },
          "source": {
            "type": "string",
            "description": "Source of meal data",
            "enum": ["manual", "ai"],
            "example": "manual"
          },
          "aiConfidence": {
            "type": "number",
            "description": "AI confidence score (0-1)",
            "example": 0.95
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Creation timestamp",
            "example": "2025-10-20T14:30:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Last update timestamp",
            "example": "2025-10-20T14:30:00.000Z"
          }
        },
        "required": [
          "id",
          "dayEntryId",
          "type",
          "items",
          "totalKcal",
          "source",
          "createdAt",
          "updatedAt"
        ]
      },
      "DayEntryOutputModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Day entry ID",
            "example": "507f1f77bcf86cd799439011"
          },
          "userId": {
            "type": "string",
            "description": "User ID",
            "example": "507f1f77bcf86cd799439011"
          },
          "date": {
            "type": "string",
            "description": "Date in YYYY-MM-DD format",
            "example": "2025-10-20"
          },
          "targetKcal": {
            "type": "number",
            "description": "Target calories for the day",
            "example": 2000
          },
          "consumedKcal": {
            "type": "number",
            "description": "Total consumed calories",
            "example": 1650
          },
          "notes": {
            "type": "string",
            "description": "Notes for the day",
            "example": "Felt energetic throughout the day"
          },
          "meals": {
            "description": "Meals for this day",
            "type": "array",
            "items": { "$ref": "#/components/schemas/MealOutputModel" }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Creation timestamp",
            "example": "2025-10-20T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Last update timestamp",
            "example": "2025-10-20T14:30:00.000Z"
          }
        },
        "required": [
          "id",
          "userId",
          "date",
          "consumedKcal",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateFoodItemInputModel": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "description": "Product ID reference",
            "example": "507f1f77bcf86cd799439011"
          },
          "recipeId": {
            "type": "string",
            "description": "Recipe ID reference",
            "example": "507f1f77bcf86cd799439011"
          },
          "name": {
            "type": "string",
            "description": "Food item name",
            "example": "Овсянка"
          },
          "quantity": {
            "type": "number",
            "description": "Quantity (grams for products, servings for recipes)",
            "example": 50
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement",
            "example": "g"
          },
          "kcal": {
            "type": "number",
            "description": "Calories",
            "example": 172
          },
          "protein": {
            "type": "number",
            "description": "Protein in grams",
            "example": 6.3
          },
          "fat": {
            "type": "number",
            "description": "Fat in grams",
            "example": 1.65
          },
          "carbs": {
            "type": "number",
            "description": "Carbohydrates in grams",
            "example": 31.05
          },
          "source": {
            "type": "string",
            "description": "Source of the item (product, recipe, ai)",
            "example": "product"
          }
        },
        "required": ["name", "quantity", "unit", "kcal"]
      },
      "CreateMealInputModel": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Meal type",
            "enum": ["breakfast", "lunch", "dinner", "snack", "other"],
            "example": "breakfast"
          },
          "time": {
            "type": "string",
            "description": "Time of meal in HH:mm format",
            "example": "14:30",
            "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
          },
          "name": {
            "type": "string",
            "description": "Meal name",
            "example": "Овсянка с бананом"
          },
          "items": {
            "description": "Food items in this meal",
            "type": "array",
            "items": { "$ref": "#/components/schemas/CreateFoodItemInputModel" }
          },
          "totalKcal": {
            "type": "number",
            "description": "Total calories",
            "example": 450
          },
          "source": {
            "type": "string",
            "description": "Source of meal data",
            "enum": ["manual", "ai"],
            "example": "manual"
          },
          "aiConfidence": {
            "type": "number",
            "description": "AI confidence score (0-1)",
            "example": 0.95
          }
        },
        "required": ["type", "items", "totalKcal", "source"]
      },
      "UpdateMealInputModel": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Meal type",
            "enum": ["breakfast", "lunch", "dinner", "snack", "other"],
            "example": "breakfast"
          },
          "time": {
            "type": "string",
            "description": "Time of meal in HH:mm format",
            "example": "14:30",
            "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
          },
          "name": {
            "type": "string",
            "description": "Meal name",
            "example": "Овсянка с бананом"
          },
          "items": {
            "description": "Food items in this meal",
            "type": "array",
            "items": { "$ref": "#/components/schemas/CreateFoodItemInputModel" }
          },
          "totalKcal": {
            "type": "number",
            "description": "Total calories",
            "example": 450
          },
          "source": {
            "type": "string",
            "description": "Source of meal data",
            "enum": ["manual", "ai"],
            "example": "manual"
          },
          "aiConfidence": {
            "type": "number",
            "description": "AI confidence score (0-1)",
            "example": 0.95
          }
        }
      }
    }
  }
}
